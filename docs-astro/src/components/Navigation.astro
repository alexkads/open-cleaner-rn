---
const navItems = [
  { href: '/', label: 'Home', icon: 'üè†' },
  { href: '/getting-started', label: 'Getting Started', icon: 'üöÄ' },
  { href: '/features', label: 'Features', icon: '‚ú®' },
  { href: '/installation', label: 'Installation', icon: 'üì¶' },
  { href: '/contributing', label: 'Contributing', icon: 'ü§ù' },
  { href: '/api', label: 'API Reference', icon: 'üìö' }
];

const currentPath = Astro.url.pathname.replace(/\/$/, '') || '/';
---

<nav class="main-nav" role="navigation" aria-label="Main navigation">
  <div class="container">
    <div class="nav-content">
      <a href="/" class="nav-logo" aria-label="Open Cleaner RN - Home">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="32" height="32" rx="8" fill="url(#gradient)" />
          <path d="M8 12h16M8 16h16M8 20h12" stroke="white" stroke-width="2" stroke-linecap="round" />
          <defs>
            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
              <stop stop-color="#0ea5e9" />
              <stop offset="1" stop-color="#8b5cf6" />
            </linearGradient>
          </defs>
        </svg>
        <span class="nav-title">Open Cleaner RN</span>
      </a>

      <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
        <span></span>
        <span></span>
        <span></span>
      </button>

      <div class="nav-links">
        {navItems.map(({ href, label, icon }) => (
          <a 
            href={href} 
            class:list={['nav-link', { active: currentPath === href }]}
            aria-current={currentPath === href ? 'page' : undefined}
          >
            <span class="nav-icon" aria-hidden="true">{icon}</span>
            <span>{label}</span>
          </a>
        ))}
      </div>

      <div class="nav-actions">
        <a 
          href="https://github.com/alexkads/open-cleaner-rn/releases" 
          class="btn btn-primary"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Download latest release (opens in new tab)"
        >
          <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z"/>
            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z"/>
          </svg>
          Download
        </a>
        
        <a 
          href="https://github.com/alexkads/open-cleaner-rn" 
          class="btn btn-outline"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="View source code on GitHub (opens in new tab)"
        >
          <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
          </svg>
          GitHub
        </a>
      </div>
    </div>
  </div>
</nav>

<style>
  .main-nav {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-bottom: 1px solid var(--color-border-light);
    position: sticky;
    top: 0;
    z-index: 50;
  }

  .nav-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 0;
    gap: 2rem;
  }

  .nav-logo {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-decoration: none;
    color: var(--color-text);
    font-weight: 600;
    font-size: 1.125rem;
  }

  .nav-logo:hover {
    color: var(--color-primary);
  }

  .nav-title {
    font-weight: 700;
    background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .mobile-menu-toggle {
    display: none;
    flex-direction: column;
    gap: 0.25rem;
    padding: 0.5rem;
    background: none;
    border: none;
    cursor: pointer;
  }

  .mobile-menu-toggle span {
    width: 1.5rem;
    height: 2px;
    background: var(--color-text);
    border-radius: 1px;
    transition: all 0.2s ease;
  }

  .nav-links {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex: 1;
    justify-content: center;
  }

  .nav-link {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    text-decoration: none;
    color: var(--color-text-muted);
    border-radius: 0.5rem;
    font-weight: 500;
    transition: all 0.2s ease;
  }

  .nav-link:hover {
    color: var(--color-primary);
    background: rgba(14, 165, 233, 0.1);
  }

  .nav-link.active {
    color: var(--color-primary);
    background: rgba(14, 165, 233, 0.15);
  }

  .nav-icon {
    font-size: 0.875rem;
  }

  .nav-actions {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    text-decoration: none;
    border-radius: 0.5rem;
    border: 1px solid transparent;
    transition: all 0.2s ease;
    cursor: pointer;
  }

  .btn-primary {
    background: var(--color-primary);
    color: white;
    border-color: var(--color-primary);
  }

  .btn-primary:hover {
    background: var(--color-primary-dark);
    border-color: var(--color-primary-dark);
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
  }

  .btn-outline {
    color: var(--color-text-muted);
    border-color: var(--color-border);
  }

  .btn-outline:hover {
    color: var(--color-text);
    border-color: var(--color-primary);
    background: rgba(14, 165, 233, 0.05);
  }

  @media (max-width: 768px) {
    .mobile-menu-toggle {
      display: flex;
    }

    .nav-links {
      display: none;
    }

    .nav-actions {
      gap: 0.5rem;
    }

    .btn {
      padding: 0.375rem 0.75rem;
      font-size: 0.8125rem;
    }

    .nav-content {
      gap: 1rem;
    }
  }

  @media (max-width: 480px) {
    .nav-title {
      display: none;
    }

    .btn span:not(.sr-only) {
      display: none;
    }

    .btn {
      padding: 0.5rem;
    }
  }
</style>

<script>
  // Mobile menu functionality
  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.querySelector('.mobile-menu-toggle');
    const navLinks = document.querySelector('.nav-links');
    
    if (toggle && navLinks) {
      toggle.addEventListener('click', () => {
        const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
        toggle.setAttribute('aria-expanded', (!isExpanded).toString());
        navLinks.style.display = isExpanded ? 'none' : 'flex';
      });
    }
  });
</script>